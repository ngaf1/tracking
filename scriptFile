pipeline{
    agent any
    tools
        {
            maven "MAVEN_HOME"
        }
    stages{
        stage('Building Artifact'){
        steps{
        withMaven(maven:'MAVEN_HOME')
        {
        sh "mvn clean install package"
        }
        }
        }
        stage('Code Quality Analysis'){
            
        steps{
        withSonarQubeEnv('sonar_jenkins')
        {
        withMaven(maven:'MAVEN_HOME')
        {
        sh "mvn sonar:sonar"
        }    
        }    
        }
        }
    }
}

